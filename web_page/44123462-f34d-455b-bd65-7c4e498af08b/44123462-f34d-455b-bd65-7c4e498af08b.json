{
  "designerVersion" : "1.8.29",
  "previousDesignerVersion" : "1.2.9",
  "id" : "44123462-f34d-455b-bd65-7c4e498af08b",
  "name" : "demoFileUploadInstantiation",
  "lastUpdate" : 1555421132197,
  "rows" : [ [ {
    "type" : "component",
    "dimension" : {
      "xs" : 12
    },
    "propertyValues" : {
      "cssClasses" : {
        "type" : "constant",
        "value" : ""
      },
      "hidden" : {
        "type" : "constant",
        "value" : false
      },
      "text" : {
        "type" : "interpolation",
        "value" : "When you attached a file below, file is immediately upload to a temporary folder on server side.<br /> When file upload is done, HTTP request answer provide id of the uploaded file.<br /> File upload is running in background so you want to make sure that user cannot submit the form until upload is done. That's because you will need to submit the uploaded files information as part of the REST request that ask for step execution (files information are expected by the contract).<br /> You can make sure that user cannot submit the form before the file is fully upload by making file upload widgets \"required\" and placing both file upload widgets and submit button in a \"form container\".<br /> If file upload is mandatory you can disable the submit button if \"formOutput.myDocumentContract\" or \"formOutput.myMultipleDocumentsContract\" variable is empty (this is the configuration used below)."
      },
      "alignment" : {
        "type" : "constant",
        "value" : "left"
      },
      "allowHTML" : {
        "type" : "constant",
        "value" : true
      }
    },
    "reference" : "e754c321-e0d1-4e3b-895c-b6d45817e8b9",
    "hasValidationError" : false,
    "id" : "pbText"
  } ], [ {
    "type" : "formContainer",
    "dimension" : {
      "xs" : 12
    },
    "propertyValues" : {
      "cssClasses" : {
        "type" : "constant",
        "value" : ""
      },
      "hidden" : {
        "type" : "constant",
        "value" : false
      },
      "url" : {
        "type" : "constant",
        "value" : ""
      },
      "method" : {
        "type" : "constant",
        "value" : ""
      }
    },
    "reference" : "5da71107-1908-4399-a6ef-f4e5af4c2c9c",
    "hasValidationError" : false,
    "id" : "pbFormContainer",
    "container" : {
      "type" : "container",
      "dimension" : {
        "xs" : 12
      },
      "propertyValues" : {
        "cssClasses" : {
          "type" : "constant",
          "value" : ""
        },
        "hidden" : {
          "type" : "constant",
          "value" : false
        }
      },
      "reference" : "f10c723e-05f4-42b6-b7da-2050f05cac95",
      "hasValidationError" : false,
      "id" : "pbContainer",
      "rows" : [ [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "text" : {
            "type" : "interpolation",
            "value" : "Single file to upload"
          },
          "level" : {
            "type" : "constant",
            "value" : "Level 2"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "left"
          }
        },
        "reference" : "14bbcf8b-1452-4d43-ad84-6ea0ef411b5b",
        "hasValidationError" : false,
        "id" : "pbTitle"
      } ], [ {
        "type" : "component",
        "dimension" : {
          "xs" : 6
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "required" : {
            "type" : "constant",
            "value" : true
          },
          "labelHidden" : {
            "type" : "constant",
            "value" : false
          },
          "label" : {
            "type" : "interpolation",
            "value" : "File to upload"
          },
          "labelPosition" : {
            "type" : "constant",
            "value" : "left"
          },
          "labelWidth" : {
            "type" : "constant",
            "value" : 4
          },
          "placeholder" : {
            "type" : "interpolation",
            "value" : "Please provide a PDF file"
          },
          "url" : {
            "type" : "constant",
            "value" : "../API/formFileUpload"
          },
          "value" : {
            "type" : "variable",
            "value" : "formOutput.myDocumentContract"
          },
          "errorContent" : {
            "type" : "variable"
          }
        },
        "reference" : "74dfcf87-e69d-4e50-b691-c9b10c3eed3f",
        "hasValidationError" : false,
        "id" : "pbUpload"
      }, {
        "type" : "component",
        "dimension" : {
          "xs" : 6
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : "text-danger"
          },
          "hidden" : {
            "type" : "expression",
            "value" : "isValidFileWidgetValue"
          },
          "text" : {
            "type" : "interpolation",
            "value" : "<b>Only PDF files are accepted for this field</b>"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "left"
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : true
          }
        },
        "reference" : "f0969c72-5530-430c-9692-26d52e12c730",
        "hasValidationError" : false,
        "id" : "pbText"
      } ], [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "text" : {
            "type" : "interpolation",
            "value" : "Multiple files to upload"
          },
          "level" : {
            "type" : "constant",
            "value" : "Level 2"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "left"
          }
        },
        "reference" : "001e13f4-900e-4c82-8274-446e81890337",
        "hasValidationError" : false,
        "id" : "pbTitle"
      } ], [ {
        "type" : "container",
        "dimension" : {
          "xs" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "repeatedCollection" : {
            "type" : "variable",
            "value" : "formOutput.myMultipleDocumentsContract"
          }
        },
        "reference" : "4db1d665-f8dc-41f3-9cf0-7413b2f6c19e",
        "hasValidationError" : false,
        "id" : "pbContainer",
        "rows" : [ [ {
          "type" : "component",
          "dimension" : {
            "xs" : 6
          },
          "propertyValues" : {
            "cssClasses" : {
              "type" : "constant",
              "value" : ""
            },
            "hidden" : {
              "type" : "constant",
              "value" : false
            },
            "required" : {
              "type" : "constant",
              "value" : true
            },
            "labelHidden" : {
              "type" : "constant",
              "value" : false
            },
            "label" : {
              "type" : "interpolation",
              "value" : "Some other file"
            },
            "labelPosition" : {
              "type" : "constant",
              "value" : "left"
            },
            "labelWidth" : {
              "type" : "constant",
              "value" : 4
            },
            "placeholder" : {
              "type" : "interpolation",
              "value" : "Please provide a file"
            },
            "url" : {
              "type" : "constant",
              "value" : "../API/formFileUpload"
            },
            "value" : {
              "type" : "variable",
              "value" : "formOutput.myMultipleDocumentsContract[$index]"
            },
            "errorContent" : {
              "type" : "variable"
            }
          },
          "reference" : "37c4f2f2-43b9-4e23-bfb0-7dc7cce44185",
          "hasValidationError" : false,
          "id" : "pbUpload"
        }, {
          "type" : "component",
          "dimension" : {
            "xs" : 6
          },
          "propertyValues" : {
            "cssClasses" : {
              "type" : "constant",
              "value" : ""
            },
            "hidden" : {
              "type" : "constant",
              "value" : false
            },
            "disabled" : {
              "type" : "constant",
              "value" : false
            },
            "label" : {
              "type" : "interpolation",
              "value" : "Remove"
            },
            "alignment" : {
              "type" : "constant",
              "value" : "left"
            },
            "buttonStyle" : {
              "type" : "constant",
              "value" : "warning"
            },
            "action" : {
              "type" : "constant",
              "value" : "Remove from collection"
            },
            "url" : {
              "type" : "interpolation"
            },
            "dataToSend" : {
              "type" : "constant"
            },
            "dataFromSuccess" : {
              "type" : "variable"
            },
            "dataFromError" : {
              "type" : "variable"
            },
            "targetUrlOnSuccess" : {
              "type" : "interpolation"
            },
            "collectionToModify" : {
              "type" : "variable",
              "value" : "$collection"
            },
            "collectionPosition" : {
              "type" : "constant",
              "value" : "Item"
            },
            "valueToAdd" : {
              "type" : "constant"
            },
            "removeItem" : {
              "type" : "variable",
              "value" : "$item"
            },
            "closeOnSuccess" : {
              "type" : "constant",
              "value" : false
            },
            "modalId" : {
              "type" : "constant",
              "value" : ""
            }
          },
          "reference" : "6448aa01-f0a5-4a5d-948f-f75ec630c9c7",
          "hasValidationError" : false,
          "id" : "pbButton"
        } ] ]
      } ], [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "disabled" : {
            "type" : "constant",
            "value" : false
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Add a file"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "right"
          },
          "buttonStyle" : {
            "type" : "constant",
            "value" : "success"
          },
          "action" : {
            "type" : "constant",
            "value" : "Add to collection"
          },
          "url" : {
            "type" : "interpolation"
          },
          "dataToSend" : {
            "type" : "constant"
          },
          "dataFromSuccess" : {
            "type" : "variable"
          },
          "dataFromError" : {
            "type" : "variable"
          },
          "targetUrlOnSuccess" : {
            "type" : "interpolation"
          },
          "collectionToModify" : {
            "type" : "variable",
            "value" : "formOutput.myMultipleDocumentsContract"
          },
          "collectionPosition" : {
            "type" : "constant",
            "value" : "Last"
          },
          "valueToAdd" : {
            "type" : "expression",
            "value" : "null"
          },
          "removeItem" : {
            "type" : "variable"
          }
        },
        "reference" : "c41ef463-d754-4785-9221-3ee89cdc3ea6",
        "hasValidationError" : false,
        "id" : "pbButton"
      } ], [ {
        "type" : "component",
        "dimension" : {
          "xs" : 12
        },
        "propertyValues" : {
          "alignment" : {
            "type" : "constant",
            "value" : "center"
          },
          "isDisplayed" : {
            "type" : "constant",
            "value" : true
          },
          "targetUrlOnSuccess" : {
            "type" : "interpolation",
            "value" : "/bonita"
          },
          "class" : {
            "type" : "constant",
            "value" : "org.bonitasoft.web.designer.experimental.parametrizedWidget.ButtonWidget"
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Start process"
          },
          "buttonStyle" : {
            "type" : "constant",
            "value" : "primary"
          },
          "dimension" : {
            "type" : "constant",
            "value" : 12
          },
          "collectionToModify" : {
            "type" : "variable"
          },
          "widgetId" : {
            "type" : "constant",
            "value" : "pbButton"
          },
          "action" : {
            "type" : "constant",
            "value" : "Start process"
          },
          "labelHidden" : {
            "type" : "constant",
            "value" : false
          },
          "dataToSend" : {
            "type" : "expression",
            "value" : "formOutput"
          },
          "readonly" : {
            "type" : "constant",
            "value" : false
          },
          "disabled" : {
            "type" : "expression",
            "value" : "$form.$invalid || !isValidFileWidgetValue"
          },
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "url" : {
            "type" : "interpolation"
          },
          "dataFromSuccess" : {
            "type" : "variable"
          },
          "dataFromError" : {
            "type" : "variable"
          },
          "collectionPosition" : {
            "type" : "constant",
            "value" : "Last"
          },
          "valueToAdd" : {
            "type" : "constant"
          },
          "removeItem" : {
            "type" : "variable"
          }
        },
        "reference" : "2eb79be4-660d-4f84-a94d-922e94ba9bba",
        "hasValidationError" : false,
        "id" : "pbButton"
      } ] ]
    }
  } ], [ {
    "type" : "component",
    "dimension" : {
      "xs" : 12
    },
    "propertyValues" : {
      "cssClasses" : {
        "type" : "constant",
        "value" : ""
      },
      "hidden" : {
        "type" : "constant",
        "value" : false
      },
      "text" : {
        "type" : "interpolation",
        "value" : "Debug"
      },
      "level" : {
        "type" : "constant",
        "value" : "Level 3"
      },
      "alignment" : {
        "type" : "constant",
        "value" : "left"
      }
    },
    "reference" : "6ea372dd-a120-400d-83b2-5413fa445f0e",
    "hasValidationError" : false,
    "id" : "pbTitle"
  } ], [ {
    "type" : "component",
    "dimension" : {
      "xs" : 12
    },
    "propertyValues" : {
      "cssClasses" : {
        "type" : "constant",
        "value" : ""
      },
      "hidden" : {
        "type" : "constant",
        "value" : false
      },
      "text" : {
        "type" : "interpolation",
        "value" : "formOutput: {{ formOutput | json }}"
      },
      "alignment" : {
        "type" : "constant",
        "value" : "left"
      },
      "allowHTML" : {
        "type" : "constant",
        "value" : true
      }
    },
    "reference" : "bfd74587-ff70-48f9-a265-a58b7f93ff7c",
    "hasValidationError" : false,
    "id" : "pbText"
  } ] ],
  "assets" : [ {
    "id" : "0fcdf8bb-44e2-4929-a5c1-c1bdb3802ad4",
    "name" : "style.css",
    "type" : "css",
    "order" : 1,
    "external" : false
  }, {
    "id" : "4144afdf-dfe5-4760-89e7-f3ea6e3bad0b",
    "name" : "ui-bootstrap-tpls-0.13.0.min.js",
    "type" : "js",
    "order" : 2,
    "external" : false
  } ],
  "inactiveAssets" : [ ],
  "data" : {
    "formOutput" : {
      "type" : "json",
      "value" : "{\n    \"myMultipleDocumentsContract\": [null],\n    \"myDocumentContract\": {}\n}",
      "exposed" : false
    },
    "isValidFileWidgetValue" : {
      "type" : "expression",
      "value" : "// This expression return true if either one of the following conditions are met:\n// - If no file widget has been set (empty JSON object: {}).\n// We do that because we don't want to display warning message if user didn't select any file.\n// - If selected and uploaded file (upload is triggered immediately after file selection) is a PDF file\n\nreturn angular.equals({}, $data.formOutput.myDocumentContract)\n    || $data.formOutput.myDocumentContract.contentType == \"application/pdf\";",
      "exposed" : false
    }
  },
  "hasValidationError" : false,
  "uuid" : "44123462-f34d-455b-bd65-7c4e498af08b",
  "type" : "form",
  "description" : "Page generated with Bonita UI designer",
  "displayName" : "demoFileUploadInstantiation"
}